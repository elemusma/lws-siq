!function(t){(sdtdl={...sdtdl,list:{collapse:function(){t(".sdtdl-front").fadeOut(),t(".sdtdl-collapsed").css("display","flex"),sdtdl.cookie.set("list_state","collapsed")},restore:function(){t(".sdtdl-collapsed").hide(),t(".sdtdl-front").fadeIn(),sdtdl.cookie.set("list_state","open")}},dialogs:{init:function(){let e=t(".sdtdl-front"),o=e.data("close"),i="left top",n="right top";e.hasClass("sdtdl-right")&&(i="right top",n="left top"),t(".sdtdl-dialog-content").dialog({autoOpen:!1,position:{my:i,at:n,of:".sdtdl-front"},modal:!1,buttons:[{text:o,click:function(e,o){t(this).dialog("close")}},],classes:{"ui-dialog":"sdtdl-dialog sdtdl-view sdtdl-accent-background sdtdl-accent-border"},closeText:o,dragStop:function(t,e){sdtdl.cookie.update(t,e)},resizeStop:function(t,e){sdtdl.cookie.update(t,e)},open:function(t,e){e=sdtdl.dialogs.check_previous_ui_state(t),sdtdl.cookie.update(t,e)},beforeClose:function(t,e){sdtdl.cookie.update(t,e,"close")},create:function(e){t(e.target).dialog("widget").css({position:"fixed"})}}),sdtdl.dialogs.populate_previous_states()},open:function(){t(".sdtdl-"+sdtdl.item_id).dialog("open")},check_previous_ui_state:function(t){let e=t.target.dataset.id,o={},i=sdtdl.cookie.get();return i.hasOwnProperty(e)&&i[e].hasOwnProperty("position")&&(o.position=i[e].position),o},populate_previous_states:function(){sdtdl.cookie.maintenance();let e=sdtdl.cookie.get();t.each(e,function(e,o){if("list_state"===e||"close"===o.state)return;let i=t(".sdtdl-"+e);o.hasOwnProperty("position")&&(i.dialog("option",{position:{my:"left+"+parseInt(o.position.left,10)+" top+"+parseInt(o.position.top,10),at:"left top",of:window}}),i.dialog("option",{width:parseInt(o.size.width,10),height:parseInt(o.size.height,10)})),i.dialog("open")})}},handle_links:function(){t(".sdtdl-content-text").each(function(){let e=t(this),o=t("<div>").html(e.html());o.contents().filter(function(){return 3===this.nodeType}).each(function(){let e=t(this).text(),o=e.replace(/https?:\/\/[^\s<>"']+/g,t=>`<a href="${t}" target="_blank" rel="noreferrer">${t}</a>`);t(this).replaceWith(o)}),o.find("*").each(function(){let e=t(this),o=e.contents().filter(function(){return 3===this.nodeType});o.each(function(){let e=t(this).text().replace(/https?:\/\/[^\s<>"']+/g,t=>`<a href="${t}" target="_blank" rel="noreferrer">${t}</a>`);t(this).replaceWith(e)})}),e.html(o.html())})},cookie:{name:"sdtdl_front_state_"+sdtdl.strings.UserID+"_"+sdtdl.strings.BlogID,maintenance:function(){let e=sdtdl.cookie.get(),o=[],i=!1;t(".sdtdl-item").each(function(){o.push(t(this).data("id"))}),t.each(e,function(t,n){"list_state"!==t&&(o.includes(t)||(delete e[t],i=!0))}),!0===i&&sdtdl.cookie.save(e)},update:function(t,e,o=""){let i=t.target.dataset.id,n="open",s=t.target.offsetParent;"close"===o&&(n="close"),sdtdl.cookie.set(i,{position:e.position,size:{height:s.offsetHeight,width:s.offsetWidth},state:n})},save:function(t){let e=new Date;e.setTime(e.getTime()+31536e6),document.cookie=sdtdl.cookie.name+"="+JSON.stringify(t)+";path=/;expires="+e.toUTCString()},get:function(){let t=RegExp(`(^| )${sdtdl.cookie.name}=([^;]+)`),e=document.cookie.match(t);return e?JSON.parse(e[2]):{}},set:function(t,e){let o=sdtdl.cookie.get();o[t]=e,sdtdl.cookie.save(o)}},init:function(){t(document).on("click touchend",".sdtdl-item",function(){sdtdl.item_id=t(this).data("id"),sdtdl.dialogs.open()}).on("click touchend",".sdtdl-front .dashicons-arrow-down-alt2",function(){sdtdl.list.collapse()}).on("click touchend",".sdtdl-collapsed",function(){sdtdl.list.restore()}),t(function(){sdtdl.dialogs.init(),t(".sdtdl-list").css("visibility","visible"),sdtdl.handle_links()})}}).init()}(jQuery);